{"version":3,"file":"TSDocConfigFile.test.js","sourceRoot":"","sources":["../../src/__tests__/TSDocConfigFile.test.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,2CAA6B;AAE7B,wDAAqD;AAErD,SAAS,eAAe,CAAC,QAAgB;IACvC,OAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAClE,CAAC;AAED,MAAM,CAAC,qBAAqB,CAAC;IAC3B,8DAA8D;IAC9D,IAAI,CAAC,KAAU;QACb,OAAO,KAAK,YAAY,iCAAe,CAAC;IAC1C,CAAC;IACD,8DAA8D;IAC9D,KAAK,CAAC,KAAc,EAAE,KAA6B,EAAE,MAAW,EAAE,OAAY,EAAE,MAAW;QACzF,MAAM,UAAU,GAAoB,KAAwB,CAAC;QAC7D,OAAO,KAAK,CAAC;YACX,WAAW,EAAE,UAAU,CAAC,WAAW;YACnC,QAAQ,EAAE,eAAe,CAAC,UAAU,CAAC,QAAQ,CAAC;YAC9C,YAAY,EAAE,UAAU,CAAC,YAAY;YACrC,YAAY,EAAE,UAAU,CAAC,YAAY;YACrC,YAAY,EAAE,UAAU,CAAC,YAAY;YACrC,cAAc,EAAE,UAAU,CAAC,cAAc;YACzC,QAAQ,EAAE,UAAU,CAAC,GAAG,CAAC,QAAQ;SAClC,CAAC,CAAC;IACL,CAAC;CACF,CAAC,CAAC;AAEH,SAAS,iBAAiB,CAAC,SAAiB;IAC1C,OAAO,iCAAe,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC;AACxE,CAAC;AAED,IAAI,CAAC,SAAS,EAAE,GAAG,EAAE;IACnB,MAAM,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,CAAC,qBAAqB,CAAC;;;;;;;;;;GAU5D,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AACH,IAAI,CAAC,SAAS,EAAE,GAAG,EAAE;IACnB,MAAM,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,CAAC,qBAAqB,CAAC;;;;;;;;;;;;;;;;;;;;;;;GAuB5D,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AACH,IAAI,CAAC,SAAS,EAAE,GAAG,EAAE;IACnB,MAAM,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,CAAC,qBAAqB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAwD5D,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AACH,IAAI,CAAC,SAAS,EAAE,GAAG,EAAE;IACnB,MAAM,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAC,CAAC,qBAAqB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAsC5D,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import * as path from 'path';\r\n\r\nimport { TSDocConfigFile } from '../TSDocConfigFile';\r\n\r\nfunction getRelativePath(testPath: string): string {\r\n  return path.relative(__dirname, testPath).split('\\\\').join('/');\r\n}\r\n\r\nexpect.addSnapshotSerializer({\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  test(value: any) {\r\n    return value instanceof TSDocConfigFile;\r\n  },\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  print(value: unknown, print: (value: any) => string, indent: any, options: any, colors: any): any {\r\n    const configFile: TSDocConfigFile = value as TSDocConfigFile;\r\n    return print({\r\n      tsdocSchema: configFile.tsdocSchema,\r\n      filePath: getRelativePath(configFile.filePath),\r\n      fileNotFound: configFile.fileNotFound,\r\n      extendsPaths: configFile.extendsPaths,\r\n      extendsFiles: configFile.extendsFiles,\r\n      tagDefinitions: configFile.tagDefinitions,\r\n      messages: configFile.log.messages,\r\n    });\r\n  },\r\n});\r\n\r\nfunction testLoadingFolder(assetPath: string): TSDocConfigFile {\r\n  return TSDocConfigFile.loadForFolder(path.join(__dirname, assetPath));\r\n}\r\n\r\ntest('Load p1', () => {\r\n  expect(testLoadingFolder('assets/p1')).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"extendsFiles\": Array [],\r\n      \"extendsPaths\": Array [],\r\n      \"fileNotFound\": false,\r\n      \"filePath\": \"assets/p1/tsdoc.json\",\r\n      \"messages\": Array [],\r\n      \"tagDefinitions\": Array [],\r\n      \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n    }\r\n  `);\r\n});\r\ntest('Load p2', () => {\r\n  expect(testLoadingFolder('assets/p2')).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"extendsFiles\": Array [],\r\n      \"extendsPaths\": Array [],\r\n      \"fileNotFound\": true,\r\n      \"filePath\": \"assets/p2/tsdoc.json\",\r\n      \"messages\": Array [\r\n        ParserMessage {\r\n          \"_text\": undefined,\r\n          \"docNode\": undefined,\r\n          \"messageId\": \"tsdoc-config-file-not-found\",\r\n          \"textRange\": TextRange {\r\n            \"buffer\": \"\",\r\n            \"end\": 0,\r\n            \"pos\": 0,\r\n          },\r\n          \"tokenSequence\": undefined,\r\n          \"unformattedText\": \"File not found\",\r\n        },\r\n      ],\r\n      \"tagDefinitions\": Array [],\r\n      \"tsdocSchema\": \"\",\r\n    }\r\n  `);\r\n});\r\ntest('Load p3', () => {\r\n  expect(testLoadingFolder('assets/p3')).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"extendsFiles\": Array [\r\n        Object {\r\n          \"extendsFiles\": Array [],\r\n          \"extendsPaths\": Array [],\r\n          \"fileNotFound\": false,\r\n          \"filePath\": \"assets/p3/base1/tsdoc-base1.json\",\r\n          \"messages\": Array [],\r\n          \"tagDefinitions\": Array [\r\n            TSDocTagDefinition {\r\n              \"allowMultiple\": false,\r\n              \"standardization\": \"None\",\r\n              \"syntaxKind\": 2,\r\n              \"tagName\": \"@base1\",\r\n              \"tagNameWithUpperCase\": \"@BASE1\",\r\n            },\r\n          ],\r\n          \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n        },\r\n        Object {\r\n          \"extendsFiles\": Array [],\r\n          \"extendsPaths\": Array [],\r\n          \"fileNotFound\": false,\r\n          \"filePath\": \"assets/p3/base2/tsdoc-base2.json\",\r\n          \"messages\": Array [],\r\n          \"tagDefinitions\": Array [\r\n            TSDocTagDefinition {\r\n              \"allowMultiple\": false,\r\n              \"standardization\": \"None\",\r\n              \"syntaxKind\": 2,\r\n              \"tagName\": \"@base2\",\r\n              \"tagNameWithUpperCase\": \"@BASE2\",\r\n            },\r\n          ],\r\n          \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n        },\r\n      ],\r\n      \"extendsPaths\": Array [\r\n        \"./base1/tsdoc-base1.json\",\r\n        \"./base2/tsdoc-base2.json\",\r\n      ],\r\n      \"fileNotFound\": false,\r\n      \"filePath\": \"assets/p3/tsdoc.json\",\r\n      \"messages\": Array [],\r\n      \"tagDefinitions\": Array [\r\n        TSDocTagDefinition {\r\n          \"allowMultiple\": false,\r\n          \"standardization\": \"None\",\r\n          \"syntaxKind\": 2,\r\n          \"tagName\": \"@root\",\r\n          \"tagNameWithUpperCase\": \"@ROOT\",\r\n        },\r\n      ],\r\n      \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n    }\r\n  `);\r\n});\r\ntest('Load p4', () => {\r\n  expect(testLoadingFolder('assets/p4')).toMatchInlineSnapshot(`\r\n    Object {\r\n      \"extendsFiles\": Array [\r\n        Object {\r\n          \"extendsFiles\": Array [],\r\n          \"extendsPaths\": Array [],\r\n          \"fileNotFound\": false,\r\n          \"filePath\": \"assets/p4/node_modules/example-lib/dist/tsdoc-example.json\",\r\n          \"messages\": Array [],\r\n          \"tagDefinitions\": Array [\r\n            TSDocTagDefinition {\r\n              \"allowMultiple\": false,\r\n              \"standardization\": \"None\",\r\n              \"syntaxKind\": 2,\r\n              \"tagName\": \"@example\",\r\n              \"tagNameWithUpperCase\": \"@EXAMPLE\",\r\n            },\r\n          ],\r\n          \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n        },\r\n      ],\r\n      \"extendsPaths\": Array [\r\n        \"example-lib/dist/tsdoc-example.json\",\r\n      ],\r\n      \"fileNotFound\": false,\r\n      \"filePath\": \"assets/p4/tsdoc.json\",\r\n      \"messages\": Array [],\r\n      \"tagDefinitions\": Array [\r\n        TSDocTagDefinition {\r\n          \"allowMultiple\": false,\r\n          \"standardization\": \"None\",\r\n          \"syntaxKind\": 2,\r\n          \"tagName\": \"@root\",\r\n          \"tagNameWithUpperCase\": \"@ROOT\",\r\n        },\r\n      ],\r\n      \"tsdocSchema\": \"https://developer.microsoft.com/json-schemas/tsdoc/v0/tsdoc.schema.json\",\r\n    }\r\n  `);\r\n});\r\n"]}